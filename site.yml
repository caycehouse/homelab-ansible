# Example usage: ansible-playbook state.yml
# This playbook deploys my whole homelab.

---

- name: Play for all machines
  hosts: all
  roles:
    - {role: common, tags: common}
    - {role: artis3n.tailscale, tags: tailscale}
  vars:
    tailscale_args: --ssh
  vars_files:
    - vault.yml

- name: Play for proxmox machines
  hosts: cupcakes
  roles:
    - {role: proxmox, tags: proxmox}

- name: Play for Pterodactyl machines
  hosts:
    - bakery
  roles:
    - {role: pterodactyl, tags: pterodactyl, become: true}
  vars_files:
    - vault.yml


- name: Play for Wings machines
  hosts:
    - bakery
    - oci1
    - oci2
  roles:
    - {role: wings, tags: wings, become: true}
